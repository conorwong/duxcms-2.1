sudo: false

language: php

branches:
  only:
    - master
 
cache:
  directories:
    - "$HOME/.composer/cache"

before_install:
  - composer self-update
  
install:
  - zip -r --exclude='*.git*' --exclude='*.zip' --exclude='*.travis.yml' DuxCMS2.1_Core.zip .
  - composer install --no-dev --no-interaction --ignore-platform-reqs
  - zip -r --exclude='*.git*' --exclude='*.zip' --exclude='*.travis.yml' DuxCMS2.1_Full.zip .

script:
  - php -v
  - ls

deploy:
  provider: releases
  api_key:
    secure: hfRdpLtw1jwbMsVr+SGfF2hhGluhcX7paaZOvkwB1S2kNBuN4gHum3X5U7P0KzKDo7lHG0y0hI+MPUa8qsWu3j2px8CZVRkutwIp4FPetORT6uI8/YPJhyz2wIoXVbjF1BjvTmZFUufnSZUzYWaVnxVRsuhr+ewAsFnuSpE+wb9Ckp+s7mlKvWea/OR8CVO/BlF1ACR3hBNPvBu869JOWWoLWvojnktriPJYMUCzDUL+WZtYdKPogCye+v9tb0eFFn8+IEfM0s4S139enNh3M8RXrlcBGlZj5QEwyvmijXYPT4WpU/dO1V0mgzL9+ms7XZWE8u0E/K/5qbGs3poFZiPcf4IQMLD5kvBbht8yfqRum8krC6NpNpSDSqcKwaPXhzy0VkDFHXaRSAYwqYNtx8bOkWEYyFs6OnLl7HoWzrJyVNPbMMunB5IAidiC4dldaf3I3OOE9GPqQxRHIC/FyU8/tkpnI/5Fhx1BPIokYWO2yRdE0TMg59imVsh9pM5qDaMT0bIxunFjeeh6dsCuDODSkWfmylgeAOoykD9YT2aysOYePs+/JMCAoSwdy9bTgLoqSq4duiYJCsL+rzmwhZ/PF5DNVknEMvqGUrBsQaf2lCIfzgmD6ZLgr6wwnlnF9qixAWcoww665XoxfDa22Uylv+Xne6FcaNIiflhtFQ8=
  file: 
    - DuxCMS2.1_Core.zip
    - DuxCMS2.1_Full.zip
  on:
    tags: true
    branch: master
  tag: latest

